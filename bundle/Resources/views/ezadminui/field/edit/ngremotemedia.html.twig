{% block ezplatform_fieldtype_ngremotemedia_widget %}
    {% set field = form.parent.vars.value.field %}
    {% set field_value = form.parent.vars.value.value %}

    {% set content = app.request.get('view').content %}
    {% set contentId = content.id %}
    {% set version = content.versionInfo.versionNo %}
    {% set type = field_value.metaData.resource_type|default('image') %}

    {% include '@NetgenRemoteMedia/ezadminui/js_templates.html.twig' %}

    {% set croppableVariations = ngrm_available_variations(content, true)  %}
    {% set availableVariations = croppableVariations|scaling_format|json_encode %}

    <div class="ngremotemedia-type" data-available-variations="{{ availableVariations }}">
        {% include '@NetgenRemoteMedia/ezadminui/field/edit/preview.html.twig' %}

        <div class="tagger">
            <div class="ngremotemedia-alttext">
                {{ form_row(form.alt_text, { 'attr': {'v-model': 'selectedImage.alternateText'} }) }}
            </div>
            {# @todo: TAGS!
                        {% set tags = field_value.metaData.tags %}
                        <select name="{$base}_tags_{$fieldId}[]" class="ngremotemedia-newtags" multiple="multiple">
                            {foreach $tags as $tag}
                            <option value="{$tag}" selected="selected">{$tag}</option>
                            {/foreach}
                        </select>
                        #}
            <div id="ngremotemedia-tags-{{ field.id }}">
                {{ form_row(form.tags, { 'attr': {'class' : 'media-tags', 'v-model': 'selectedImage.tags'} }) }}
            </div>
        </div>

        {% include '@NetgenRemoteMedia/ezadminui/field/edit/interactions.html.twig' %}
        <!-- modal -->
        <media-modal :folders="folders" v-if="modalOpen" @close="handleModalClose"/>
    </div>
{% endblock %}
