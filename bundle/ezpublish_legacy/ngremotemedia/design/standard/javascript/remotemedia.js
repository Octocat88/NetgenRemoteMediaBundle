(function(e){function t(t){for(var n,i,c=t[0],s=t[1],l=t[2],u=0,f=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);d&&d(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,c=1;c<a.length;c++){var s=a[c];0!==r[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=s;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"06ea":function(e,t,a){},1637:function(e,t,a){"use strict";var n=a("c49c"),r=a.n(n);r.a},"3fb5":function(e,t,a){},"4d7b":function(e,t,a){},"513c":function(e,t,a){"use strict";var n=a("4d7b"),r=a.n(n);r.a},"56d7":function(e,t,a){"use strict";a.r(t);a("5df3"),a("4f7f");var n=a("75fc"),r=(a("96cf"),a("3b8d")),o=(a("ac6a"),a("cadf"),a("551c"),a("f751"),a("097d"),a("a026")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"overlay"},[a("div",{staticClass:"media-modal"},[a("div",{staticClass:"title"},[e._v("\n      Select media\n      "),a("span",{staticClass:"close",on:{click:e.close}},[e._v("Ã—")])]),a("div",{staticClass:"body"},[a("media-facets",{attrs:{folders:e.folders,facets:e.facets},on:{change:e.handleFacetsChange}}),a("media-galery",{attrs:{media:e.media,canLoadMore:e.canLoadMore},on:{loadMore:e.handleLoadMore,"media-selected":function(t){return e.$emit("media-selected",t)}}})],1)])])},c=[],s=(a("8e6e"),a("456d"),a("bd86")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mediaFacets"},[a("ul",{staticClass:"tabs"},[a("li",{class:{active:e.isType(e.TYPE_IMAGE)}},[a("span",{on:{click:function(t){return e.handleTypeChange(e.TYPE_IMAGE)}}},[e._v("Image and documents")])]),a("li",{class:{active:e.isType(e.TYPE_VIDEO)}},[a("span",{on:{click:function(t){return e.handleTypeChange(e.TYPE_VIDEO)}}},[e._v("Video")])])]),a("div",{staticClass:"body"},[a("div",{staticClass:"form-field"},[a("label",{attrs:{for:"folder"}},[e._v("Select Folder")]),a("v-select",{attrs:{options:e.foldersWithNew,label:"name",reduce:function(e){return e.id},placeholder:"showing all files"},on:{input:e.handleFolderChange},scopedSlots:e._u([{key:"search",fn:function(t){return["checkbox"===t.attributes.type?a("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.folderSearchQuery,expression:"folderSearchQuery"}],staticClass:"vs__search",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.folderSearchQuery)?e._i(e.folderSearchQuery,null)>-1:e.folderSearchQuery},on:{change:function(t){var a=e.folderSearchQuery,n=t.target,r=!!n.checked;if(Array.isArray(a)){var o=null,i=e._i(a,o);n.checked?i<0&&(e.folderSearchQuery=a.concat([o])):i>-1&&(e.folderSearchQuery=a.slice(0,i).concat(a.slice(i+1)))}else e.folderSearchQuery=r}}},"input",t.attributes,!1),t.events)):"radio"===t.attributes.type?a("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.folderSearchQuery,expression:"folderSearchQuery"}],staticClass:"vs__search",attrs:{type:"radio"},domProps:{checked:e._q(e.folderSearchQuery,null)},on:{change:function(t){e.folderSearchQuery=null}}},"input",t.attributes,!1),t.events)):a("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.folderSearchQuery,expression:"folderSearchQuery"}],staticClass:"vs__search",attrs:{type:t.attributes.type},domProps:{value:e.folderSearchQuery},on:{input:function(t){t.target.composing||(e.folderSearchQuery=t.target.value)}}},"input",t.attributes,!1),t.events))]}},{key:"option",fn:function(t){return[t.new?a("div",[e._v("\n            "+e._s(t.name)+"\n            "),a("button",[e._v("Create new")])]):t.added?a("div",[e._v(e._s(t.name)+" (new)")]):a("div",[e._v(e._s(t.name))])]}}]),model:{value:e.selectedFolder,callback:function(t){e.selectedFolder=t},expression:"selectedFolder"}})],1),a("div",{staticClass:"search"},[a("ul",{staticClass:"searchType"},[a("li",{class:{active:e.isSearch(e.SEARCH_NAME)}},[a("span",{on:{click:function(t){return e.handleSearchChange(e.SEARCH_NAME)}}},[e._v("Name")])]),a("li",{class:{active:e.isSearch(e.SEARCH_TAG)}},[a("span",{on:{click:function(t){return e.handleSearchChange(e.SEARCH_TAG)}}},[e._v("Tag")])])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"text",placeholder:"Search by "+e.searchName},domProps:{value:e.query},on:{keyup:e.handleQueryChange,input:function(t){t.target.composing||(e.query=t.target.value)}}})])])])},d=[],u=(a("7f7f"),a("7514"),"image"),f="video",h="name",p="tag",m="all",v=a("4a7a"),y=a.n(v),g={name:"MediaFacets",props:["folders","facets"],data:function(){return{TYPE_IMAGE:u,TYPE_VIDEO:f,SEARCH_NAME:h,SEARCH_TAG:p,FOLDER_ALL:m,selectedFolder:this.facets.folder,folderSearchQuery:"",query:this.facets.query,addedFolders:[]}},computed:{searchName:function(){return this.facets.searchType===h?"name":"tag"},foldersWithNew:function(){var e=this,t=[].concat(Object(n["a"])(this.folders),Object(n["a"])(this.addedFolders));return 0===this.folderSearchQuery.length?t:t.find((function(t){return t.name===e.folderSearchQuery}))?t:[{name:this.folderSearchQuery,id:this.folderSearchQuery,new:!0}].concat(Object(n["a"])(t))}},methods:{handleSearchChange:function(e){this.$emit("change",{searchType:e})},handleTypeChange:function(e){this.$emit("change",{mediaType:e})},isType:function(e){return this.facets.mediaType===e},isSearch:function(e){return this.facets.searchType===e},handleFolderChange:function(e){this.folderSearchQuery="",this.addedFolders.push({id:e,name:e,added:!0}),this.$emit("change",{folder:this.selectedFolder})},handleQueryChange:function(){this.$emit("change",{query:this.query})}},components:{"v-select":y.a}},b=g,_=(a("513c"),a("2877")),S=Object(_["a"])(b,l,d,!1,null,"d49cfaf2",null),C=S.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mediaGalery"},[a("div",{staticClass:"items"},e._l(e.media,(function(t){return a("div",{key:t.id,staticClass:"media"},["image"===t.type?a("div",[a("img",{attrs:{src:t.url,alt:t.filename}}),a("Label",{staticClass:"filename"},[e._v(e._s(t.filename))]),a("div",{staticClass:"wh"},[e._v(e._s(t.width)+" x "+e._s(t.height))])],1):a("div",[a("i",{staticClass:"ng-icon ng-video"}),a("Label",{staticClass:"filename"},[e._v(e._s(t.filename))]),a("div",{staticClass:"wh"},[e._v(e._s(t.width)+" x "+e._s(t.height))])],1),a("button",{attrs:{type:"button"},on:{click:function(a){return e.$emit("media-selected",t)}}},[e._v("Select")])])})),0),a("div",{staticClass:"load-more-wrapper"},[e.canLoadMore?a("button",{attrs:{type:"button"},on:{click:function(t){return e.$emit("loadMore")}}},[e._v("Load more")]):e._e()])])},w=[],T={name:"MediaGalery",props:["media","canLoadMore","onLoadMore"]},j=T,M=(a("c443"),Object(_["a"])(j,O,w,!1,null,"0833f226",null)),x=M.exports,E=(a("28a5"),a("01c8")),k=function(e){var t=[];for(var a in e)t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")},P=function(e){return e[0].toUpperCase()+e.slice(1)},Q=function(e){var t=e.split("-"),a=Object(E["a"])(t),r=a[0],o=a.slice(1);return[r].concat(Object(n["a"])(o.map(P))).join("")},A=function(e,t){var a=Math.pow(10,t);return parseFloat(Math.round(e*a)/a).toFixed(t)},I={B:"KB",KB:"MB",MB:"GB",GB:"TB"},L=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"B",n=I[a];return!n||t<1024?"".concat(A(t,2)," ").concat(a):e(t/1024,n)},F=a("b012"),R=a.n(F);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $=25,B={name:"MediaModal",props:["folders"],components:{"media-facets":C,"media-galery":x},data:function(){return{media:[],canLoadMore:!1,facets:{folder:"",searchType:h,mediaType:u,query:""}}},methods:{close:function(){this.$emit("close")},debouncedLoad:R()((function(e){this.load(e)}),500),load:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{patch:!1},a=t.patch,this.abortController&&this.abortController.abort(),this.abortController=new AbortController,n={limit:$,offset:a?this.media.length:0,q:this.facets.query,mediatype:this.facets.mediaType,folder:this.facets.folder||m,search_type:this.facets.searchType},r="/ngadminui/ngremotemedia/browse?".concat(k(n)),e.prev=5,e.next=8,fetch(r,{signal:this.abortController.signal});case 8:return o=e.sent,e.next=11,o.json();case 11:i=e.sent,this.media=a?this.media.concat(i.hits):i.hits,this.canLoadMore=i.load_more,e.next=20;break;case 16:if(e.prev=16,e.t0=e["catch"](5),20===e.t0.code){e.next=20;break}throw e.t0;case 20:case"end":return e.stop()}}),e,this,[[5,16]])})));function t(){return e.apply(this,arguments)}return t}(),handleLoadMore:function(){this.debouncedLoad({patch:!0})},handleFacetsChange:function(e){this.facets=N({},this.facets,{},e),this.debouncedLoad()}},mounted:function(){this.load()}},G=B,D=(a("1637"),Object(_["a"])(G,i,c,!1,null,"3953ab26",null)),z=D.exports,H=(a("3fb5"),{bind:function(e,t,a){var n=Q(t.arg);a.context[n]=t.value}});o["a"].config.productionTip=!1;var Y=function(){document.querySelectorAll(".ngremotemedia-type").forEach((function(e,t){window["remoteMedia".concat(t)]=new o["a"]({el:e,directives:{init:H},data:{RemoteMediaSelectedImage:RemoteMediaSelectedImage,folders:[],modalOpen:!1,selectedImage:{id:"",name:"",type:"image",url:"",alternateText:"",tags:[],size:""},allTags:[]},computed:{nonImagePreviewClass:function(){return"video"===this.selectedImage.type?"ng-video":"ng-book"},formattedSize:function(){return L(this.selectedImage.size)}},components:{"media-modal":z,"v-select":y.a},methods:{handleBrowseMediaClicked:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/ngadminui/ngremotemedia/folders");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.folders=a,this.modalOpen=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleModalClose:function(){this.modalOpen=!1},handleTagsInput:function(e){this.allTags=Object(n["a"])(new Set([].concat(Object(n["a"])(this.allTags),Object(n["a"])(e))))},handleMediaSelected:function(e){this.selectedImage={id:e.resourceId,name:e.filename,type:e.type,url:e.url,alternateText:"",tags:e.tags,size:e.filesize},this.modalOpen=!1},handleRemoveMediaClicked:function(){this.selectedImage={id:"",name:"",type:"image",url:"",alternateText:"",tags:[],size:0}}},mounted:function(){this.allTags=Object(n["a"])(this.selectedImage.tags)}})}))};"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?Y():document.addEventListener("DOMContentLoaded",Y)},c443:function(e,t,a){"use strict";var n=a("06ea"),r=a.n(n);r.a},c49c:function(e,t,a){}});
//# sourceMappingURL=app.js.map